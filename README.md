# REST API для управління контактами

## Опис проекту

Цей проект є REST API для управління колекцією контактів. API дозволяє отримувати, додавати, видаляти та оновлювати контакти, використовуючи HTTP-запити. Для тестування API рекомендується використовувати [Postman](https://www.getpostman.com/).

## Встановлення та налаштування

1. Клонуйте репозиторій:
    ```sh
    git clone https://github.com/your-repo/goit-node-rest-api.git
    ```
2. Перейдіть у директорію проекту:
    ```sh
    cd goit-node-rest-api
    ```
3. Встановіть залежності:
    ```sh
    npm install
    ```
4. Запустіть сервер:
    ```sh
    npm start
    ```

## Доступні маршрути

### Отримання всіх контактів

**GET /api/contacts**

-   Повертає масив усіх контактів у форматі JSON зі статусом `200`.

### Отримання контакту за ID

**GET /api/contacts/:id**

-   Якщо контакт знайдено – повертає об'єкт контакту у форматі JSON зі статусом `200`.
-   Якщо контакт не знайдено – повертає JSON `{ "message": "Contact with id=<id> not found" }` зі статусом `404`.

### Видалення контакту

**DELETE /api/contacts/:id**

-   Якщо контакт знайдено та видалено – повертає JSON `{ "message": "Contact deleted" }` зі статусом `200`.
-   Якщо контакт не знайдено – повертає JSON `{ "message": "Contact with id=<id> not found" }` зі статусом `404`.

### Додавання нового контакту

**POST /api/contacts**

-   Отримує `body` у форматі JSON з обов'язковими полями `{name, email, phone}`.
-   Виконує валідацію за допомогою мідлвари `validateBody.js`, яка перевіряє коректність даних.
-   Якщо `body` некоректний – повертає JSON `{ "message": error.message }` зі статусом `400`.
-   Якщо `body` валідний – додає контакт і повертає новий об'єкт `{id, name, email, phone}` зі статусом `201`.

### Оновлення контакту

**PUT /api/contacts/:id**

-   Отримує `body` у форматі JSON із можливістю оновлення будь-яких полів (`name`, `email`, `phone`).
-   Якщо `body` порожній – повертає JSON `{ "message": "Body must have at least one field" }` зі статусом `400`.
-   Виконує валідацію за допомогою мідлвари `validateBody.js`, яка перевіряє коректність даних.
-   Якщо `body` некоректний – повертає JSON `{ "message": error.message }` зі статусом `400`.
-   Якщо контакт знайдено – оновлює його і повертає оновлений об'єкт зі статусом `200`.
-   Якщо контакт не знайдено – повертає JSON `{ "message": "Contact with id=<id> not found" }` зі статусом `404`.

## Використання мідлвар

-   **`validateBody.js`**:
    -   Використовується для перевірки коректності `body` у запитах `POST` та `PUT`.
    -   Забезпечує, що всі необхідні поля присутні та відповідають вимогам.
-   **`ctrlWrapper.js`**:
    -   Використовується для обгортання контролерів, щоб автоматично обробляти помилки та передавати їх у глобальний обробник помилок.
-   **`HttpError.js`**:
    -   Використовується для створення об'єктів помилок із відповідним статусом та повідомленням.

## Використані модулі

-   **`cors`**:
    -   Використовується для налаштування політики CORS (Cross-Origin Resource Sharing), що дозволяє обмін даними між різними доменами.
-   **`express`**:
    -   Використовується для створення серверу та маршрутизації.
-   **`joi`**:
    -   Використовується для валідації даних у запитах.
-   **`nanoid`**:
    -   Використовується для генерації унікальних ідентифікаторів контактів.

## Запуск у режимі розробки

Для зручної розробки можна використовувати `nodemon`:

```sh
npm run dev
```
